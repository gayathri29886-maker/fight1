<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skyscraper Tycoon</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700;900&amp;display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #10b981; /* Emerald Green for Money/Success */
            --secondary-color: #6366f1; /* Indigo for actions */
            --background-color: #111827; /* Deep Dark Gray/Black */
            --card-color: #1f2937; /* Slightly lighter dark background for cards */
            --font-color: #f3f4f6; /* Near White */
            /* Default Base Font Size */
            --base-font-size: 16px; 
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-color);
            color: var(--font-color);
            display: flex;
            justify-content: center;
            align-items: center;
            
            /* Enforce Full Screen Height */
            height: 100vh;
            margin: 0; 
            padding: 1rem;
            overflow: hidden;¬†
        }
        
        /* Apply the base font size to all elements inside the game container */
        .game-container * {
            font-size: var(--base-font-size);
        }

        /* Override specific elements where sizes are defined by Tailwind or absolute values */
        .game-container h1 { font-size: calc(var(--base-font-size) * 3); } /* ~3x size */
        .game-container h2 { font-size: calc(var(--base-font-size) * 1.75); } /* ~1.75x size */
        .game-container h3 { font-size: calc(var(--base-font-size) * 1.25); } /* ~1.25x size */
        .game-container .text-6xl { font-size: calc(var(--base-font-size) * 3.75); }
        .game-container .text-4xl { font-size: calc(var(--base-font-size) * 2.5); }
        .game-container .text-3xl { font-size: calc(var(--base-font-size) * 1.875); }
        .game-container .text-lg { font-size: calc(var(--base-font-size) * 1.125); }
        .game-container .text-xl { font-size: calc(var(--base-font-size) * 1.25); }
        .game-container .text-base { font-size: var(--base-font-size); }
        .game-container .text-sm { font-size: calc(var(--base-font-size) * 0.875); }
        .game-container .text-xs { font-size: calc(var(--base-font-size) * 0.75); }


        .game-container {
            width: 100%;
            max-width: 1100px;
            background-color: var(--card-color);
            border-radius: 1.5rem;
            box-shadow: 0 40px 60px -15px rgba(0, 0, 0, 0.4);
            padding: 2rem;
            border: 1px solid #374151; /* Subtle border */
            
            display: flex;
            flex-direction: column;
            
            max-height: calc(100vh - 2rem); 
            overflow-y: hidden;¬†
            position: relative; /* Needed for positioning the settings button */
        }

        .stat-card {
            background-color: #374151; /* Darker card background */
            padding: 1.25rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2);
        }

        .action-button {
            transition: all 0.3s;
            transform: translateY(0);
        }

        .action-button:hover:not(:disabled) {
            box-shadow: 0 10px 15px -3px rgba(16, 185, 129, 0.3), 0 4px 6px -2px rgba(16, 185, 129, 0.1);
            transform: translateY(-3px);
        }

        .action-button:disabled {
            cursor: not-allowed;
            opacity: 0.4; /* More subtle disabled state */
        }

        /* Custom animation for rent collection */
        @keyframes rentPulse {
            0% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.03); opacity: 1; }
            100% { transform: scale(1); opacity: 0.8; }
        }

        #passive-income-display {
            display: flex;
            align-items: center;
            font-weight: 900;
            color: var(--primary-color);
        }

        #passive-income-display span {
            animation: rentPulse 2s infinite ease-in-out;
            margin-left: 0.75rem;
        }
        
        /* SETTINGS PANEL STYLES */
        .settings-panel {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            background-color: rgba(17, 24, 39, 0.95); /* Semi-transparent dark overlay */
            border-radius: 1.5rem;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            z-index: 100; /* Ensure it's on top of game content */
        }
        
        .settings-content {
            background-color: #1f2937;
            padding: 2.5rem;
            border-radius: 1rem;
            max-width: 400px;
            width: 100%;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5);
        }

        @media (min-width: 640px) {
            .grid-cols-2-sm {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }
    </style>
</head>
<body>

<div class="game-container">
    
    <button id="settings-btn" class="absolute top-4 right-4 text-gray-400 hover:text-gray-100 transition-colors z-50 p-2" onclick="toggleSettingsPanel()">
        <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.526.321 1.026.321 1.526 0l.52-.312z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
    </button>
    
    <header class="text-center flex-shrink-0 mb-8"> 
        <h1 class="text-6xl font-black text-gray-100 tracking-tight">üèóÔ∏è SKYSCRAPER TYCOON</h1>
    </header>

    <div class="flex-grow overflow-y-auto pr-2"> 
        
        <div class="mb-10 mt-6 p-5 bg-indigo-900 border border-indigo-700 rounded-xl shadow-2xl flex-shrink-0">
            <div class="flex justify-between text-base font-semibold mb-2">
                <p class="text-indigo-300">
                    Current Level: <span id="level-display" class="font-black text-indigo-100 text-xl">1</span>
                </p>
                <p class="text-indigo-300">
                    XP Progress: <span id="xp-current-display" class="text-indigo-100">0</span> / <span id="xp-next-display" class="text-indigo-100">10</span> XP
                </p>
            </div>
            <div class="w-full bg-indigo-700 rounded-full h-3">
                <div id="xp-bar" class="bg-indigo-400 h-3 rounded-full transition-all duration-500" style="width: 0%"></div>
            </div>
            <p class="text-xs text-indigo-400 mt-2">Earn XP by building Apartment Units!</p>
        </div>

        <div id="stats-panel" class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-10 flex-shrink-0">
            <div class="stat-card">
                <p class="text-sm font-medium uppercase text-gray-400">Money</p>
                <p id="money-display" class="text-4xl font-extrabold text-emerald-400">‚Çπ10,100</p>
            </div>
            <div class="stat-card">
                <p class="text-sm font-medium uppercase text-gray-400">Units</p>
                <p id="apartment-display" class="text-4xl font-extrabold text-indigo-400">0</p>
            </div>
            <div class="stat-card">
                <p class="text-sm font-medium uppercase text-gray-400">Land (Blocks)</p>
                <p id="land-display" class="text-4xl font-extrabold text-yellow-400">0</p>
            </div>
            <div class="stat-card">
                <p class="text-sm font-medium uppercase text-gray-400">Rent Income (Per Tick)</p>
                <div id="passive-income-display">
                    <p id="rent-rate-display" class="text-3xl font-bold">‚Çπ0.00</p>
                    <span id="rent-pulse"></span>
                </div>
            </div>
        </div>

        <div id="actions-panel" class="p-8 bg-gray-800 border border-gray-700 rounded-xl shadow-lg">
            <h2 class="text-3xl font-bold mb-6 text-gray-200 border-b border-gray-700 pb-3">Actions</h2>

            <div class="grid grid-cols-1 grid-cols-2-sm lg:grid-cols-3 gap-6">

                <div class="bg-blue-900/30 p-5 rounded-lg border border-blue-700 shadow-xl">
                    <h3 class="text-xl font-bold text-blue-300 mb-2">Buy Land üó∫Ô∏è</h3>
                    <p class="text-sm text-gray-400 mb-3">Acquire more space for your massive skyscrapers!</p>
                    <p class="text-lg font-bold text-gray-100 mb-3">Cost: <span id="land-cost-display" class="text-blue-300">‚Çπ1,000</span></p>
                    <button id="buy-land-btn" class="action-button w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-4 rounded-xl shadow-lg" onclick="buyLand()">
                        Buy 1 Land Block
                    </button>
                </div>

                <div class="bg-emerald-900/30 p-5 rounded-lg border border-emerald-700 shadow-xl">
                    <h3 class="text-xl font-bold text-emerald-300 mb-2">Build Apartment Unit üè¢</h3>
                    <p class="text-sm text-gray-400 mb-3">Build an apartment. Requires land and generates rent. <span class="font-bold text-xs text-indigo-400">(+2 XP)</span></p>
                    <p class="text-lg font-bold text-gray-100 mb-3">
                        Cost: <span id="apartment-cost-display" class="text-emerald-300">‚Çπ500</span> | Land: <span id="apartment-land-display">1</span>
                    </p>
                    <button id="build-apartment-btn" class="action-button w-full bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-3 px-4 rounded-xl shadow-lg" onclick="buildApartment()">
                        Build Unit
                    </button>
                </div>

                <div class="bg-yellow-900/30 p-5 rounded-lg border border-yellow-700 shadow-xl">
                    <h3 class="text-xl font-bold text-yellow-300 mb-2">Upgrade Rent Value üìà</h3>
                    <p class="text-sm text-gray-400 mb-3">Increase rent value per apartment unit permanently.</p>
                    <p class="text-lg font-bold text-gray-100 mb-3">
                        Cost: <span id="upgrade-cost-display" class="text-yellow-300">‚Çπ5,000</span> | Increase: <span id="upgrade-increase-display">+‚Çπ1.00</span>
                    </p>
                    <button id="upgrade-rent-btn" class="action-button w-full bg-yellow-600 hover:bg-yellow-500 text-white font-bold py-3 px-4 rounded-xl shadow-lg" onclick="upgradeRentRate()">
                        Upgrade Rental Value
                    </button>
                </div>

            </div>
        </div>
        
        <div id="message-box" class="mt-8 p-4 bg-red-900/30 border border-red-700 text-red-300 rounded-lg hidden flex-shrink-0"></div>

    </div> <div id="settings-panel" class="settings-panel">
        <div class="settings-content">
            <h2 class="text-2xl font-bold text-gray-100 mb-6 border-b border-gray-700 pb-3">‚öôÔ∏è Game Settings</h2>
            
            <div class="space-y-4">
                <label for="font-size-range" class="block text-gray-300 font-medium">Adjust Font Size</label>
                <input type="range" id="font-size-range" min="12" max="24" value="16" step="1" class="w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer range-lg">
                <p class="text-sm text-gray-400">Current Base Size: <span id="current-font-size-display">16</span>px</p>
                <p class="text-xs text-yellow-400 mt-2">Note: This adjusts the base font size for the entire UI.</p>
            </div>
            
            <button class="w-full mt-8 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-all" onclick="toggleSettingsPanel()">
                Close Settings
            </button>
        </div>
    </div>
    </div>

<script>
    // --- GAME STATE ---
    let state = {
        money: 10100, // Starting at 10,100 INR
        land: 0,
        apartments: 0,
        rentPerUnit: 1.00,
        landCost: 1000,
        apartmentCost: 500,
        rentUpgradeCost: 5000,
        rentUpgradeIncrease: 1.00,
        gameInterval: null,
        gameTickMs: 1000, // Rent collected every 1000ms (1 second)

        // Level System State
        level: 1,
        xp: 0,
        baseXPToNext: 10,¬†
        xpToNextLevel: 10,
        xpPerApartment: 2,¬†
    };

    // --- UTILITIES ---

    /**
     * Formats a number into a currency string (e.g., 12345.67 -> "‚Çπ12,345.67")
     * @param {number} amount
     */
    function formatCurrency(amount) {
        return new Intl.NumberFormat('en-IN', {
            style: 'currency',
            currency: 'INR', // Indian Rupee
            minimumFractionDigits: 2,
            maximumFractionDigits: 2
        }).format(amount);
    }

    /**
     * Shows a temporary message in the message box.
     * @param {string} message¬†
     * @param {string} type 'success', 'error', 'info'
     */
    function showMessage(message, type = 'info') {
        const box = document.getElementById('message-box');
        box.textContent = message;
        // High contrast colors for dark mode
        const colorClass = type === 'error' ? 'bg-red-900/30 border border-red-700 text-red-300' :¬†
                           type === 'success' ? 'bg-emerald-900/30 border border-emerald-700 text-emerald-300' :¬†
                           'bg-blue-900/30 border border-blue-700 text-blue-300';

        box.className = `mt-8 p-4 rounded-lg ${colorClass}`;
        box.style.display = 'block';

        setTimeout(() => {
            box.style.display = 'none';
        }, 3000);
    }

    // --- UI UPDATER ---

    function updateUI() {
        // Update Money, Apartments, Land, Rent
        document.getElementById('money-display').textContent = formatCurrency(state.money);
        document.getElementById('apartment-display').textContent = state.apartments.toLocaleString();
        document.getElementById('land-display').textContent = state.land.toLocaleString();
        
        const totalRent = state.apartments * state.rentPerUnit;
        document.getElementById('rent-rate-display').textContent = formatCurrency(totalRent);

        // Update Level UI
        const xpRatio = state.xp / state.xpToNextLevel;
        document.getElementById('level-display').textContent = state.level.toLocaleString();
        document.getElementById('xp-current-display').textContent = state.xp.toLocaleString();
        document.getElementById('xp-next-display').textContent = state.xpToNextLevel.toLocaleString();
        // Calculate percentage for the bar, capped at 100%
        document.getElementById('xp-bar').style.width = `${Math.min(100, xpRatio * 100)}%`;¬†

        // Update Action Costs/Requirements
        document.getElementById('land-cost-display').textContent = formatCurrency(state.landCost);
        document.getElementById('apartment-cost-display').textContent = formatCurrency(state.apartmentCost);
        document.getElementById('upgrade-cost-display').textContent = formatCurrency(state.rentUpgradeCost);
        document.getElementById('upgrade-increase-display').textContent = `+${formatCurrency(state.rentUpgradeIncrease)}`;
        
        // Update button states (Enable/Disable)
        const buyLandBtn = document.getElementById('buy-land-btn');
        const buildApartmentBtn = document.getElementById('build-apartment-btn');
        const upgradeRentBtn = document.getElementById('upgrade-rent-btn');

        buyLandBtn.disabled = state.money < state.landCost;
        buildApartmentBtn.disabled = state.money < state.apartmentCost || state.land < 1;
        upgradeRentBtn.disabled = state.money < state.rentUpgradeCost;
    }

    // --- LEVEL SYSTEM LOGIC ---

    /**
     * Checks if a level up occurred and applies rewards.
     */
    function checkLevelUp() {
        // Use a while loop to handle gaining multiple levels at once
        while (state.xp >= state.xpToNextLevel) {
            // Level Up!
            state.xp -= state.xpToNextLevel; // Carry over excess XP
            state.level += 1;
            
            // Calculate new XP required: Base * Current Level (e.g., L2 needs 10*2=20, L3 needs 10*3=30)
            state.xpToNextLevel = state.baseXPToNext * state.level;¬†

            // Rewards: Increase cash reward and rent boost with level
            const rewardMoney = state.level * 5000;
            const rewardRentIncrease = 0.50 + (state.level * 0.10);¬†
            
            state.money += rewardMoney;
            state.rentPerUnit += rewardRentIncrease;

            showMessage(
                `LEVEL UP! You are now Level ${state.level}! Gained ${formatCurrency(rewardMoney)} and Rent per unit increased by ${formatCurrency(rewardRentIncrease)}!`,¬†
                'success'
            );
        }
        updateUI();
    }


    // --- GAME LOGIC ---

    /**
     * The main game loop function, called every second (game tick).
     */
    function gameLoop() {
        const passiveIncome = state.apartments * state.rentPerUnit;
        
        if (passiveIncome > 0) {
            state.money += passiveIncome;
            
            // Show a visual pulse on the rent display
            const rentPulse = document.getElementById('rent-pulse');
            rentPulse.textContent = `+${formatCurrency(passiveIncome)}`;
            rentPulse.classList.add('animate-pulse');
            setTimeout(() => {
                rentPulse.textContent = '';
                rentPulse.classList.remove('animate-pulse');
            }, 500);
        }

        updateUI();
    }

    /**
     * Action: Buys one block of land.
     */
    function buyLand() {
        if (state.money >= state.landCost) {
            const cost = state.landCost; // Store cost before modification
            state.money -= cost;
            state.land += 1;
            
            // Dynamic cost increase for land
            state.landCost = Math.ceil(state.landCost * 1.5 / 100) * 100; // Increase by 50%, rounded to nearest 100
            
            showMessage(`Purchased 1 Land Block for ${formatCurrency(cost)}!`, 'info');
            updateUI();
        } else {
            showMessage('Not enough money to buy land!', 'error');
        }
    }

    /**
     * Action: Builds one apartment unit.
     */
    function buildApartment() {
        if (state.money >= state.apartmentCost && state.land >= 1) {
            const cost = state.apartmentCost; // Store cost before modification
            
            state.money -= cost;
            state.land -= 1;
            state.apartments += 1;
            
            // XP Gain and Level Check
            state.xp += state.xpPerApartment;
            checkLevelUp();
            
            // Dynamic cost increase for apartments
            state.apartmentCost = Math.ceil(state.apartmentCost * 1.25 / 100) * 100; // Increase by 25%, rounded to nearest 100
            
            showMessage(`Built 1 Apartment Unit for ${formatCurrency(cost)}! Gained ${state.xpPerApartment} XP.`, 'success');
            updateUI();
        } else if (state.land < 1) {
            showMessage('Not enough land! Buy more land first.', 'error');
        } else {
            showMessage('Not enough money to build an apartment!', 'error');
        }
    }

    /**
     * Action: Upgrades the rent rate for all apartments.
     */
    function upgradeRentRate() {
        if (state.money >= state.rentUpgradeCost) {
            const cost = state.rentUpgradeCost; // Store cost before modification
            
            state.money -= cost;
            state.rentPerUnit += state.rentUpgradeIncrease;
            
            // Dynamic cost and increase for upgrades
            state.rentUpgradeCost = Math.ceil(state.rentUpgradeCost * 1.8 / 1000) * 1000; // Increase cost by 80%, rounded to nearest 1000
            state.rentUpgradeIncrease += 1.00; // Increase subsequent rent boost by $1.00
            
            showMessage(`Rent rate upgraded for ${formatCurrency(cost)}! Each unit now earns ${formatCurrency(state.rentPerUnit)} per tick.`, 'info');
            updateUI();
        } else {
            showMessage('Not enough money for the rent upgrade!', 'error');
        }
    }

    // --- SETTINGS LOGIC ---

    /**
     * Opens or closes the settings panel.
     */
    function toggleSettingsPanel() {
        const panel = document.getElementById('settings-panel');
        panel.style.display = panel.style.display === 'flex' ? 'none' : 'flex';
    }
    
    /**
     * Applies the selected font size to the CSS variable.
     */
    function applyFontSize() {
        const fontSizeRange = document.getElementById('font-size-range');
        const fontSize = fontSizeRange.value;
        
        // Update the CSS variable which controls all scaling
        document.documentElement.style.setProperty('--base-font-size', `${fontSize}px`);
        
        // Update the display text
        document.getElementById('current-font-size-display').textContent = fontSize;
    }

    // --- INITIALIZATION ---

    function initGame() {
        updateUI(); // Set initial UI values
        
        // Start the game loop
        state.gameInterval = setInterval(gameLoop, state.gameTickMs);
        
        // Initial encouragement message
        showMessage("Welcome to Skyscraper Tycoon! Start by buying land and building to gain XP and Level Up!", 'info');
        
        // Initialize Font Size Control
        const fontSizeRange = document.getElementById('font-size-range');
        fontSizeRange.addEventListener('input', applyFontSize);
        
        // Set initial font size display
        applyFontSize();
    }

    // Expose functions to the global scope for HTML onclick attributes
    window.buyLand = buyLand;
    window.buildApartment = buildApartment;
    window.upgradeRentRate = upgradeRentRate;
    window.toggleSettingsPanel = toggleSettingsPanel;
    
    window.onload = initGame;
</script>

</body>
</html>
